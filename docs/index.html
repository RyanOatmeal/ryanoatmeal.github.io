<!DOCTYPE html>
<html lang="en">
  <head>
  </head>
  <body>
    <div 
      id="outputArea" 
      style="
        font-size: 2em;
        width: min(95%, 80ch);
        height: min(200ch, 90vh);
        border: 1px solid #ccc;
        margin-bottom: .5em;
        background-color: #f9f9f9;
        overflow: auto;
        white-space: pre-wrap;
        font-family: monospace;">
    </div>

    <div style="width: 100%; display: flex;">
      <form style="width: 100%; display: flex;" id="inputForm">
        <input
          style="width: min(95%, 80ch); font-family: monospace; font-size: 2em; padding: 0" 
          type="text" 
          id="userInput"
        />
      </form>
    </div>

    <script type="module">
      import { world } from './scripts/index.js';

      const form = document.getElementById('inputForm');
      const userInput = document.getElementById('userInput');
      const outputArea = document.getElementById('outputArea');

      let { state, output } = world({ state: {}, input: "Jerry"});
      outputArea.textContent = output;

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const userInputValue = userInput.value.trim();
      const { state: newState, output: newOutput } = world({ state, input: userInputValue });
      state = newState;
      output = newOutput;
      outputArea.textContent = output;
      userInput.value = '';
    });
    
    </script>
  </body>
</html>